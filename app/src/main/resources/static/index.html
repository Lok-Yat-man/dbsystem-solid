<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>STARS</title>
    <link href="css/mapboxgl.css" rel="stylesheet">
    <link rel="stylesheet" href="css/elementUI.css">
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/params.css">
    <link rel="stylesheet" href="css/header.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/popup.css">
    <link rel="icon" href="./img/szu_icon.png" type="image/x-icon">

</head>
<body>
<div id="app">
    <div id="map"></div>
    <img ref="paramIcon" :src="paramExpandIcon" alt="switch"
         @click="sideBarSwitch('params','paramSwitch','paramsIn', 'paramsOut', 'paramSwitchIn', 'paramSwitchOut')"
         id="paramSwitch" class="paramsSwitch paramSwitchIn">
    <div class="paramsIn" id="params">
        <div class="params"  v-if="switchStatus === 'DCPGS'" style="height: 430px; ">
            <div class="params_header_container">
                <h3 class="params_header">DCPGS</h3>
                <img class="params_headerside" src="./img/params/titleside.png"></div>

            <el-form :label-position="DCPGS.labelPosition" label-width="50px" :model="DCPGS">
                <span class="item_label">Cluster</span>
                <div class="param_adjuster" style="width: 100%;display: inline-block">
                    <div class="progress-div">
                        <img src="img/params/pause.png" class="process-pause">
                        <el-slider v-model="DCPGS.clusterNums" :min="0" :max="DCPGS.maxClusterNums"
                        @change="updateClusterNums"></el-slider>
                        <input class="param_input" type="text" v-model="DCPGS.clusterNums" @change="updateClusterNums();updateProcess();" style="height: 18px;width: 35px;position: relative;left: 13px;top: 2px">
                    </div>
                </div>
                <br><br>

                <span class="item_label">Dataset</span>
                <br><br>
                <div class="left_gap"></div>
                <el-radio v-model="DCPGS.dataset" label="gowalla" @change="loadDSPGS('',-1)" style="font-size:14px;">Gowalla</el-radio>
                <el-radio v-model="DCPGS.dataset" label="brightkite" style="margin-bottom: 5%; font-size:14px;" @change="loadDSPGS('',-1)">Brightkite</el-radio>
                <br>

                <span class="item_label" >Params</span>
                <br><br>
                <div class="param_adjuster" >
                    <span class="item_labelpart">&epsilon;</span>
                    <div class="adjuster" @click="DCPGS.params.epsilon = paramAdjust(DCPGS.params.epsilon,false,1.0,0,0.1,2)" style="margin-left: 5px;">
                        <div class="icon-minus"></div>
                    </div>
                    <input class="param_input" type="text" v-model="DCPGS.params.epsilon">
                    <div class="adjuster" @click="DCPGS.params.epsilon = paramAdjust(DCPGS.params.epsilon,true,1.0,0,0.1,2)">
                        <div class="icon-plus"></div>
                    </div>
                </div>
                <div class="param_adjuster" >
                    <span class="item_labelpart2">&omega;</span>
                    <div class="adjuster" @click="DCPGS.params.omega = paramAdjust(DCPGS.params.omega,false,1.0,0,0.1,2)" style="margin-left: 5px;">
                        <div class="icon-minus"></div>
                    </div>
                    <input class="param_input" type="text" v-model="DCPGS.params.omega">
                    <div class="adjuster" @click="DCPGS.params.omega = paramAdjust(DCPGS.params.omega,true,1.0,0,0.1,2)">
                        <div class="icon-plus"></div>
                    </div>
                </div>
                <br><br>
                <div class="param_adjuster">
                    <span class="item_labelpart">&tau;</span>
                    <div class="adjuster" @click="DCPGS.params.tau = paramAdjust(DCPGS.params.tau,false,1.0,0,0.1,2)" style="margin-left: 5px;">
                        <div class="icon-minus"></div>
                    </div>
                    <input class="param_input" type="text" v-model="DCPGS.params.tau">
                    <div class="adjuster" @click="DCPGS.params.tau = paramAdjust(DCPGS.params.tau,true,1.0,0,0.1,2)">
                        <div class="icon-plus"></div>
                    </div>
                </div>
                <div class="param_adjustmaxD">
                    <span class="item_labelmaxD">maxD</span>
                    <div class="adjuster" @click="DCPGS.params.maxD = paramAdjust(DCPGS.params.maxD,false,300,10,10,0)" style="margin-left: 5px;">
                        <div class="icon-minus"></div>
                    </div>
                    <input class="param_input" type="text" v-model="DCPGS.params.maxD">
                    <div class="adjuster" @click="DCPGS.params.maxD = paramAdjust(DCPGS.params.maxD,true,300,10,10,0)">
                        <div class="icon-plus"></div>
                    </div>
                </div>
                <br><br>
                <div class="params_confirm">
                    <div class="confirm_button" @click="paramsSwitch('DCPGS_UPDATE')">
                        <span class="confirm_label">Confirm</span>
                    </div>
                </div>
                <div class="params_bottom">
                    <div class="bottom1"></div>
                    <div class="bottom_line"></div>
                    <div class="bottom1"></div>
                </div>
            </el-form>
        </div>

        <div
             class="kstcparams" v-if="switchStatus === 'KSTC'" >
            <div class="params_header_container">
                <h3 class="params_header">STC</h3>
                <img class="params_headerside" src="./img/params/titleside.png">
            </div>
            <span class="item_label">Algorithm</span>
            <br><br>
            <el-form :label-position="KSTC.labelPosition" label-width="50px" :model="KSTC">
                <div class="left_gap"></div>
                <el-radio v-model="KSTC.query.command" label="SIMPLE_DBSCAN_BASED_APPROACH" >DBSCAN</el-radio>
                <el-radio v-model="KSTC.query.command" label="OPTICS_BASED_APPROACH_OM" style="margin-bottom: 5%; margin-left:8%;" @change="KstcChangeToOptics" >OPTICS</el-radio>

                <br><br>
                <div class="param_adjuster" >
                    <span class="item_labelpart">&epsilon;</span>
                    <div class="adjuster"  @click="KSTC.query.epsilon = paramAdjust(KSTC.query.epsilon,false,1.0,0,0.1,1)" style="margin-left: 5px;">
                        <div class="icon-minus"></div>
                    </div>
                    <input class="param_input" :disabled = "KSTC.query.command === 'OPTICS_BASED_APPROACH_OM'" type="text" v-model="KSTC.query.epsilon">
                    <div class="adjuster"  @click="KSTC.query.epsilon = paramAdjust(KSTC.query.epsilon,true,1.0,0,0.1,1)">
                        <div class="icon-plus"></div>
                    </div>
                </div>
                <div class="param_adjuster" >
                    <span class="item_labelpartk">k</span>
                    <div class="adjuster" @click="KSTC.query.k = paramAdjust(KSTC.query.k,false,20,1,1,0)" style="margin-left: 5px;">
                        <div class="icon-minus"></div>
                    </div>
                    <input class="param_input" type="text" v-model="KSTC.query.k">
                    <div class="adjuster" @click="KSTC.query.k = paramAdjust(KSTC.query.k,true,20,1,1,0)">
                        <div class="icon-plus"></div>
                    </div>
                </div>
                <br><br>
                <div class="param_adjuster" >
                    <span class="item_labelSTC">Lon</span>
                    <input class="kstclon_input" type="text" v-model="KSTC.query.location.longitude" >
                </div>
                <div class="param_adjuster">
                    <span class="item_labelSTC">Lat</span>
                    <input class="kstclat_input" type="text" v-model="KSTC.query.location.latitude" >
                </div>
                <br><br>
                <div class="param_adjusterlong">
                    <span class="item_labelSTC">minPts</span>
                    <div class="adjuster"  @click="KSTC.query.minPts = paramAdjust(KSTC.query.minPts,false,20,2,1,0)" style="margin-left: 9.5%;">
                        <div class="icon-minus"></div>
                    </div>
                    <input class="param_input" :disabled = "KSTC.query.command === 'OPTICS_BASED_APPROACH_OM'" type="text" v-model="KSTC.query.minPts">
                    <div class="adjuster"  @click="KSTC.query.minPts = paramAdjust(KSTC.query.minPts,true,20,2,1,0)">
                        <div class="icon-plus"></div>
                    </div>
                </div>
                <br><br>
                <div class="param_adjusterlong">
                    <span class="item_labelSTC">maxDist</span>
                    <div class="adjuster" @click="KSTC.query.maxDist = paramAdjust(KSTC.query.maxDist,false,9999999999,-1,1,0)" style="margin-left: 5%;">
                        <div class="icon-minus"></div>
                    </div>
                    <input class="param_input" type="text" v-model="KSTC.query.maxDist">
                    <div class="adjuster" @click="KSTC.query.maxDist = paramAdjust(KSTC.query.maxDist,true,9999999999,-1,1,0)">
                        <div class="icon-plus"></div>
                    </div>
                </div>
                <br><br>
                <div class="kstc-param-adjuster" >
                    <span class="keywords">Words</span>
                    <el-autocomplete
                            class="kstcparam_input"
                            v-model="KSTC.query.tmpKeywords"
                            :fetch-suggestions="searchKeywords"
                            placeholder="separate by ';'"
                            :trigger-on-focus="false"
                            @select="handleSelect">
                    </el-autocomplete>
                </div>
                <br>
                <div class="params_confirm" >
                    <div class="confirm_button" @click="paramsSwitch('KSTC_UPDATE')">
                        <span class="confirm_label">Confirm</span>
                    </div>
                </div>
                <div class="params_bottom" style="margin-top:10%;">
                    <div class="bottom1"></div>
                    <div class="bottom_line"></div>
                    <div class="bottom1"></div>
                </div>
            </el-form>
        </div>

        <div
                class="stdparams" v-if="switchStatus === 'spatial_skylines'" style="height: 480px; bottom: -50px">
            <div class="params_header_container">
                <h3 class="params_header">STD</h3>
                <img class="params_headerside" src="./img/params/titleside.png">
            </div>
            <span class="item_label">Algorithm</span>
            <br><br>
            <el-form :label-position="spatial_skylines.labelPosition" label-width="50px" :model="spatial_skylines">
                <div class="left_gap" style="margin-left:7.5;"></div>
                <el-radio v-model="spatial_skylines.query.command" label="BSTD" >BSTD</el-radio>
                <el-radio v-model="spatial_skylines.query.command" label="ASTD" style="margin-bottom: 5%;margin-left:10%;">ASTD</el-radio>
                <br>
                <span class="item_label" >Params</span>
                <br><br>
                <div class="param_adjustSTD"  style="width: 260px; padding-bottom:3%;">
                    <span class="item_labelSTDlon">Lon</span>
                    <input class="param2_input" type="text" v-model="spatial_skylines.query.longitude" style="margin-left:4%;">
                </div>
                <br><br>
                <div class="param_adjustSTD" style="width: 260px; padding-bottom:3%;">
                    <span class="item_labelSTD">Lat</span>
                    <input class="param2_input" type="text" v-model="spatial_skylines.query.latitude" style="margin-left:4%;">
                </div>
                <br><br>
                <div class="inputContainer" style=" width: 280px; padding-bottom:3%;" >
                    <span class="keywords">Words</span>
                    <input class="stdparam_input" type="text" v-model="spatial_skylines.query.keywords">
                </div>
                <br>
                <div class="params_confirm" >
                    <div class="confirm_button" @click="paramsSwitch('spatial_skylines_UPDATE')">
                        <span class="confirm_label">Confirm</span>
                    </div>
                </div>
                <div class="params_bottom" style="margin-top:10%;">
                    <div class="bottom1"></div>
                    <div class="bottom_line"></div>
                    <div class="bottom1"></div>
                </div>
            </el-form>
        </div>

        <div class="params" v-if="switchStatus === 'topK'">
            <div class="params_header_container">
                <h3 class="params_header">SP</h3>
                <img class="params_headerside" src="./img/params/titleside.png">
            </div>
        <el-form :label-position="topk.labelPosition" label-width=" 100px" :model="topk" >
          <div class="param_adjuster" style="width: 260px; padding-bottom: 30px">
            <span class="item_label1" >Lon</span>
            <input v-model="topk.query.longitude_topk" class="param2_input" type="text" style="margin-left:3%;"></input>
          </div>
          <div class="param_adjuster" style="width: 260px; padding-bottom: 30px">
            <span class="item_label1" >Lat</span>
            <input v-model="topk.query.latitude_topk"  class="param2_input" type="text" style="margin-left:5%;"></input>
          </div>
          <div class="param_adjuster" style="width: 280px; padding-bottom: 30px">
            <span class="item_labelword" >Words</span>
            <input v-model="topk.query.keywords_topk" class="param1_input" type="text" style="margin-left:3%;"></input>
          </div>
          <div class="param_adjuster" style="width: 260px; padding-bottom: 30px">
            <span class="item_labelk" >k</span>
            <input v-model="topk.query.k_topk"  class="param2_input" type="text" style="margin-left:5%;"></input>
          </div>

          <div class="params_confirm">
            <div class="confirm_button" @click="paramsSwitch('topK_UPDATE')" >
              <span class="confirm_label">Confirm</span>
            </div>
          </div>
            <div class="params_bottom" style="margin-top:10%;">
                <div class="bottom1"></div>
                <div class="bottom_line"></div>
                <div class="bottom1"></div>
            </div>

        </el-form>
      </div>

        <div class="params" v-if="switchStatus === 'topK_yago'">
        <h3 class="params_header" >SP</h3>
        <el-form :label-position="topk_yago.labelPosition" label-width=" 100px" :model="topk_yago" >
          <el-form-item label="Longitude" >
            <input v-model="topk_yago.query.longitude_yago_topk" style="width: 120px; height: 20px; border-radius: 8px; margin-right: 30px; margin-left: 10px" ></input>
          </el-form-item>
          <el-form-item label="Latitude">
            <input v-model="topk_yago.query.latitude_yago_topk" style="width: 120px; height: 20px; border-radius: 8px; margin-right: 30px; margin-left: 10px"></input>
          </el-form-item>
          <el-form-item label="Keywords">
            <input v-model="topk_yago.query.keywords_yago_topk" style="width: 120px; height: 20px; border-radius: 8px; margin-right: 30px; margin-left: 10px"></input>
          </el-form-item>
          <el-form-item label="K">
            <input v-model="topk_yago.query.k_yago_topk" style="width: 120px; height: 20px; border-radius: 8px; margin-right: 30px; margin-left: 10px"></input>
          </el-form-item>

          <div class="params_confirm">
            <div class="confirm_button" @click="paramsSwitch('topK_yago_UPDATE')" >
              <span class="confirm_label">Confirm</span>
            </div>
          </div>
            <div class="params_bottom" style="margin-top:10%;">
                <div class="bottom1"></div>
                <div class="bottom_line"></div>
                <div class="bottom1"></div>
            </div>

        </el-form>
      </div>

        <div class="RPAparams"  v-if="switchStatus === 'PA'" >
            <div class="params_header_container">
                <h3 class="params_header">RPA</h3>
                <img class="params_headerside" src="./img/params/titleside.png"></div>
            <el-form :label-position="pa.labelPosition" label-width="50px" :model="pa">
                <span class="item_label">Cluster</span>
                <div class="param_adjuster" style="width: 100%;display: inline-block">
                    <div class="progress-div">
                        <img src="img/params/pause.png" class="process-pause">
                        <el-slider v-model="pa.clusterNums" :min="0" :max="pa.maxClusterNums"
                                   @change="updatePAClusterNums"></el-slider>
                        <input class="param_input" type="text" v-model="pa.clusterNums" @change="updatePAClusterNums();updateProcess();" style="height: 18px;width: 35px;position: relative;left: 20px;top: 2px">
                    </div>
                </div>
                <br><br>
                <div class="params_confirm" style="margin-top:30%;">
                    <div class="confirm_button" @click="paramsSwitch('PA_UPDATE')">
                        <span class="confirm_label">Confirm</span>
                    </div>
                </div>
                <div class="params_bottom" style="margin-top:15%;">
                    <div class="bottom1"></div>
                    <div class="bottom_line"></div>
                    <div class="bottom1"></div>
                </div>
            </el-form>
        </div>

    </div>

    <img ref="sideBarIcon" :src="expandIcon" alt="switch" @click="sideBarSwitch('sideBar','sideBarSwitch','sideIn','sideOut','switchIn','switchOut', null)" id="sideBarSwitch" class="sideBarSwitch switchOut" style="cursor: pointer">
    <!-- 侧边导航栏-->
    <el-row class="tac sideOut" id="sideBar" style="overflow:auto;" >
        <el-col :span="12">
            <!--              <h3 style="text-align: center">Menu</h3>-->

            <el-menu class="el-menu-vertical-demo"
                    unique-opened
            >
                <el-submenu index="1">
                    <template slot="title">
                        <span>Clustering</span>
                    </template>
                    <el-submenu index="1-1">
                        <template slot="title">Geo-social place clustering</template>
                        <el-menu-item index="1-1-1" @click="loadDSPGS('StockholmSweden', 13)" >Stockholm, Sweden</el-menu-item>
                        <el-menu-item index="1-1-2" @click="loadDSPGS('MalmoSweden', 13)" >Malmo, Sweden</el-menu-item>
                        <el-menu-item index="1-1-3" @click="loadDSPGS('GothenburgSweden', 13)" >Gothenburg, Sweden</el-menu-item>
                        <el-menu-item index="1-1-4" @click="loadDSPGS('AustinUS', 13)" >Austin, US</el-menu-item>
                        <el-menu-item index="1-1-5" @click="loadDSPGS('LondonUK', 13)" >London, UK</el-menu-item>
                        <el-menu-item index="1-1-6" @click="loadDSPGS('NewcastleUponTyneUk', 13.5)" >Newcastle Upon Tyne, UK</el-menu-item>
                        <el-menu-item index="1-1-7" @click="loadDSPGS('OsloNorway', 13)" >Oslo, Norway</el-menu-item>
                        <el-menu-item index="1-1-8" @click="loadDSPGS('ZurichSwitzerland', 13)" >Zurich, Switzerland</el-menu-item>
                    </el-submenu>
                    <el-submenu index="1-2">
                        <template slot="title">Spatial textual clustering</template>
                        <el-menu-item index="1-2-3" @click="loadKStc('')">yelp_academic</el-menu-item>

                    </el-submenu>
                    <el-submenu index="1-3">
                        <template slot="title">Textually spatial skylines</template>
                        <el-menu-item index="1-3-1"  @click="loadSTD()">yelp_academic</el-menu-item>
                    </el-submenu>

                    <el-submenu index="1-4">
                        <template slot="title">Semantic place on KG</template>
                        <el-menu-item index="1-4-1"  @click="loadTopK()">UK</el-menu-item>
<!--                         <el-menu-item index="1-4-2"  @click="loadTopK_yago()">yago</el-menu-item>-->
                    </el-submenu>

                    <el-submenu index="1-5">
                        <template slot="title">Dense spatial subtensors</template>
                        <el-menu-item index="1-5-1"  @click="loadPA('Brightkite_Euro_sorted',5)">Brightkite_Euro</el-menu-item>
                        <el-menu-item index="1-5-2"  @click="loadPA('Gowalla_NA_sorted',5.5)">Gowalla_NA</el-menu-item>
                    </el-submenu>

                </el-submenu>
                <el-submenu index="2">
                    <template slot="title">
                        <span slot="title">Visualization</span>
                    </template>
                    <el-submenu index="2-1">
                        <template slot="title">KDV</template>
                        <el-menu-item index="2-1-1" @click="loadKDV">kdv</el-menu-item>
                    </el-submenu>

                    <el-submenu index="2-2">
                        <template slot="title">Temporal KDV</template>
                        <el-menu-item index="2-2-1">2-2-1</el-menu-item>
                    </el-submenu>

                    <el-submenu index="2-3">
                        <template slot="title">Line KDV</template>
                        <el-menu-item index="2-3-1">2-3-1</el-menu-item>
                    </el-submenu>
                </el-submenu>
            </el-menu>
        </el-col>
    </el-row>
    <!--顶部导航栏-->
    <db-header></db-header>
</div>
</body>
<script src="js/kdv/kdvCpp.js"></script>
<script src="js/environment/d3.js"></script>
<script src="js/environment/vue.js"></script>
<script src="js/environment/elementUI.js"></script>
<script src="js/environment/mapboxgl.js"></script>
<script src="js/environment/axios.js"></script>
<script type="module" src="js/app.js"></script>
<script src="js/template/header.js"></script>
</html>
