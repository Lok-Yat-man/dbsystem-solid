import com.github.davidmoten.rtree.geometry.Geometry;
import entity.RelevantObject;
import ivtidx.DefaultLeafInvertedIndex;
import ivtidx.InvertedIndex;
import std.BSTD;
import com.github.davidmoten.rtree.Entry;
import entity.Coordinate;
import entity.Query;
import org.junit.jupiter.api.Test;
import service.DefaultRelevantObjectServiceImpl;
import service.IRelevantObjectService;

import java.util.Arrays;
import java.util.LinkedList;
import java.util.List;
import java.util.stream.Collectors;
import java.util.stream.Stream;

public class BSTDTest {
    private BSTD b = new BSTD();

    @Test
    public void bstdTest() {
        LinkedList<Query> queries = new LinkedList<>();
        // 边界值：
        // x1 = -120.09514 y1 = 27.555126
        // x2 = -73.200455 y2 = 53.679195

        Query query1 = Query.create(
                Coordinate.create(
                        -86.12,
                        39.76
                ),
                Arrays.asList("Rooms","Bes")
                //Arrays.asList("Water")
        );
        Query query2 = Query.create(
                Coordinate.create(
                        -86.09,
                        39.75
                ),
                Arrays.asList("Fast","Breakfast")
        );

        //queries.add(query1);
        queries.add(query2);


//        List<Entry<String, Geometry>> valuesEntry = b.bstd(queries);
        List<RelevantObject> relevantObjects = b.bstd(queries);

//        List<String> values = valuesEntry.stream()
//                .map(Entry::value)
//                .collect(Collectors.toList());
//
//
//        //System.out.println(valuesEntry);
//
//
        System.out.println(relevantObjects);

        System.out.println(relevantObjects.size());
    }
}

 /*
 Philadelphia       -75.16 39.95
 Tampa              -82.45 27.95
 Indianapolis       -86.09 39.75
 St.Louis           -90.22 38.63
 Nashville          -86.79 36.16
 New Orleans        -90.04 29.97
 Tucson             -110.96 32.23
 Santa Barbara      -119.69 34.43
 Reno               -119.46 39.31
 Boise              -116.17 43.35
 Edmonton           -113.29 53.32

 Rochester          -92.28 44.00
 Bennington         -73.11 42.53
  */

/*
Aviation=1
Ball=2
Badminton=3
Aircraft=4
3D=5
Cafe=6
Analysts=7
Airsoft=8
Adjusters=9
Ayurveda=10
Auctions=11
ATV=12
Australian=13
Auditors=14
Armenian=15
Architectural=16
Concierge=17
Burmese=18
Coating=19
Chi=20
Basketball=21
Competitions=22
Addiction=23
Artificial=24
Attraction=25
Cabaret=26
CPR=27
Bookkeepers=28
Assistants=29
Crawl=30
Aerial=31
Balloon=32
Bistros=33
Argentine=34
Awnings=35
Arabic=36
Boudoir=37
Cashing=38
Audio=39
Circuit=40
Aid=41
Buses=42
Aestheticians=43
Afghan=44
Aquarium=45
Radio=46
Acne=47
Estheticians=48
Demolition=49
Abatement=50
Cardiologists=51
Beverage=52
Axe=53
Maternity=54
Facilities=55
Assisted=56
Alternative=58
Cultural=59
Botanical=60
Christmas=61
Neurologist=62
Farming=63
Empanadas=64
Assembly=65
Allergists=66
Colombian=67
Skate=68
Aquariums=69
DUI=70
Orthotics=71
Generator=72
Climbing=73
Hospice=74
British=75
Print=76
Private=77
Registration=78
Ear=79
Fabricators=80
Metal=81
Appraisal=82
Lebanese=83
Guitar=84
Donairs=85
Wigs=86
Film=87
Customized=88
Investing=89
Advertising=90
Criminal=91
Booth=92
Battery=93
Contouring=94
Agencies=95
Mini=96
Comedy=97
Exercise=98
Meditation=99
Walking=100
Utilities=102
Falafel=103
Bespoke=104
Carpenters=105
Grout=106
Filipino=108
Sip=109
Candle=110
Cuisine=111
Herbs=112
Chimney=113
Casinos=114
African=115
Amateur=116
Cake=117
Airlines=118
Data=121
Airports=122
Housing=123
Knitting=124
Business=125
Accountants=126
DJs=127
Dispensaries=128
Arenas=130
Boxing=131
European=132
Plus=133
Divorce=135
Cooking=136
Costumes=137
Theatre=138
Country=140
Records=142
Do-It-Yourself=145
Donation=146
Propane=147
Comic=148
Cardio=149
Vacation=150
Cheese=151
Gun=153
Ranges=154
Countertop=155
Lawn=156
Organization=157
Barre=158
Recycling=161
Assistance=163
Screen=164
Creperies=165
Cemeteries=166
Adoption=170
Animal=172
Instrument=174
Escape=175
Cannabis=177
Blues=178
Advising=179
Imaging=180
Tasting=181
Butcher=182
Bus=184
Hawaiian=185
Brewpubs=186
Television=189
Waffles=190
Eye=191
Pasta=193
Bowling=195
Framing=197
Laundromat=198
Fences=200
Head=201
Chips=202
Interval=203
Signmaking=204
Cleaners=207
Commercial=208
Poke=210
Hiking=211
International=212
Cabinetry=216
Churches=218
Smog=220
Fishing=221
Elementary=222
Ramen=223
Mental=225
Paint=227
Pakistani=228
Buyers=232
Game=234
Hookah=235
Studios=236
Holistic=237
Graphic=238
Landscape=239
Watch=241
Baby=242
Parking=244
Ammo=245
Gardens=246
Taxis=250
Cards=252
Supplements=253
Gardeners=254
Counseling=255
Designers=256
Check=258
Architects=261
Boat=264
Martial=265
Blinds=266
Acai=268
Duct=271
Laboratory=272
Maintenance=273
Wholesale=274
Instruments=277
Pools=278
Amusement=279
Cuban=283
Walkers=284
Shaved=285
Spanish=286
Boating=287
Organizations=288
Clinics=289
Organic=292
Limos=293
Pilates=294
Truck=295
Cakes=296
Buildings=302
Rim=303
Carpeting=304
Customization=311
Pressure=313
Religious=314
Couriers=317
Gutter=320
Rooms=321
Keys=323
Bed=324
Karaoke=325
Post=327
Shuttles=328
Watches=329
Spray=332
Sales=335
Dermatologists=336
Boot=337
Chocolatiers=339
Wineries=342
Preschools=344
Offices=346
Lighting=350
Windshield=352
Damage=353
Candy=356
Session=357
Inspectors=358
Cinema=359
Halal=362
Concrete=363
Tub=367
Piercing=368
Airport=373
Brokers=377
Arcades=378
Noodles=382
Packing=384
Mortgage=391
Hospitals=395
Wraps=396
Telecommunications=397
Door=398
Hauling=401
Adult=406
Reflexology=411
Museums=413
Bookstores=416
Insurance=418
Ophthalmologists=421
Cupcakes=422
Stands=423
Acupuncture=424
Historical=426
Nutritionists=439
Plates=440
Weight=441
Festivals=442
Painters=446
Windows=447
Dog=451
Boarding=452
Bike=454
Blow=456
Bikes=463
Periodontists=464
Children's=465
Diagnostic=467
Roofing=468
Vape=469
Personal=477
Bubble=478
Outdoor=479
Electricians=489
Activities=490
Loss=493
Korean=497
Farmers=498
Internet=501
French=503
Control=507
Interior=509
Gastropubs=513
Window=515
Notaries=516
Toy=518
Pediatric=528
Community=530
Fruits=532
Soul=539
Center=541
Hobby=552
Bridal=555
Heater=557
Tree=561
Physical=568
Providers=578
Performing=581
Camps=590
Golf=602
Thrift=610
Cheesesteaks=614
Agents=615
Flooring=621
Buffets=622
Extensions=624
Mattresses=630
Carpet=633
Laser=634
Antiques=638
Transmission=639
Dive=652
Orthodontists=660
Water=663
Middle=665
Tanning=667
Tattoo=672
Dance=676
Ethnic=680
Office=691
Towing=692
Gear=695
Endodontists=706
Wedding=724
Chiropractors=726
Bagels=738
Comfort=746
Credit=749
Oral=752
Consignment=753
Property=759
Banks=761
Bath=763
Kitchen=765
Dogs=774
Gluten-Free=777
Greek=779
Galleries=786
Hardware=792
Self=795
Gift=796
Storage=800
Latin=810
Shipping=829
Design=831
Indian=838
Alterations=842
Classes=844
Rentals=850
Tours=852
Vegan=856
Breweries=863
Photography=864
Discount=868
Management=875
Gardening=892
Phone=893
Bar=894
Landscaping=897
Wear=902
Transportation=903
Detailing=906
Tex-Mex=919
Store=920
Cajun=923
Yoga=938
Movers=948
Phones=952
Florists=955
Wash=960
Books=975
Southern=988
Thai=991
Eyewear=1016
Artists=1019
Tacos=1020
Markets=1022
Shop=1045
Soup=1061
Gas=1064
Building=1090
Donuts=1097
Plumbing=1111
Optometrists=1112
Clubs=1130
Vegetarian=1158
Schools=1169
Equipment=1177
Laundry=1180
Computer=1189
Conditioning=1199
Government=1216
Lounges=1219
Surgeons=1227
Hot=1228
Used=1232
Shoe=1252
Mediterranean=1263
Makeup=1269
Trucks=1273
Eyelash=1278
Art=1317
Air=1319
Appliances=1323
Sitting=1356
Delivery=1378
Veterinarians=1383
Parks=1385
Public=1401
Department=1430
Crafts=1440
Stylists=1459
Trainers=1460
Financial=1487
Party=1490
Diners=1494
Steakhouses=1506
Jewelry=1541
Cosmetics=1544
Fusion=1547
Groomers=1549
Asian=1574
Supply=1582
Dry=1586
Flavor=1604
Drugstores=1630
Sporting=1662
Barbers=1677
Juice=1684
Barbeque=1694
Cocktail=1718
Electronics=1765
Goods=1797
Therapy=1818
Pubs=1821
Japanese=1830
Gyms=1831
Decor=1892
Convenience=1919
Apartments=1921
Flowers=1930
Parts=1933
Education=1936
Cosmetic=1979
Dentistry=1993
Furniture=2037
General=2074
Music=2083
Dealers=2094
Men's=2095
Accessories=2105
Women's=2184
Contractors=2327
Waxing=2333
Change=2356
Delis=2393
Cleaning=2398
Spirits=2413
Installation=2431
Day=2442
Tires=2471
Skin=2498
Spaces=2513
Dentists=2528
Service=2558
Massage=2591
Caterers=2645
Cream=2657
Clothing=2689
Ice=2739
Cafes=2859
Wings=2966
Pet=3040
Salad=3064
Bakeries=3150
Grocery=3185
Desserts=3186
Centers=3193
Beer=3291
Instruction=3311
Professional=3327
Chinese=3343
Chicken=3373
Sports=3406
Venues=3431
Stations=3539
Wine=3556
Real=3612
Care=3628
Estate=3662
Seafood=3698
Car=3713
Pets=3758
Doctors=3763
Removal=3842
Supplies=4090
Italian=4573
Mexican=4614
Nail=4621
Shops=4913
Specialty=5159
Entertainment=5601
Burgers=5636
Fashion=5739
Garden=5799
Hotels=5857
Brunch=6239
New=6365
Fast=6472
Breakfast=6525
Coffee=6728
Arts=6838
Tea=7069
Pizza=7093
Hair=7244
Auto=7328
Active=7687
Life=7927
Traditional=8320
Sandwiches=8366
Salons=8593
Repair=9878
Event=9895
Stores=9937
Planning=9974
Automotive=10773
Medical=11975
Nightlife=12281
Health=12408
Local=12761
American=13066
Beauty=14292
Bars=14329
Home=18154
Shopping=24395
Food=33405
Services=40387
Restaurants=52268
*/

